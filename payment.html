<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cloudator - Complete Your Donation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2E8B57;
            --secondary-color: #1E5945;
            --text-color: #333;
            --light-gray: #f6f7f8;
            --white: #fff;
            --border-color: #e0e0e0;
            --transition: all 0.18s ease;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: Inter, Poppins, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
            background: var(--light-gray);
            color: var(--text-color);
            line-height: 1.5;
            -webkit-font-smoothing:antialiased;
        }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 18px; }

        header { background: var(--white); box-shadow: 0 2px 10px rgba(0,0,0,0.06); position: sticky; top: 0; z-index:1000; }
        .nav-content { display:flex; align-items:center; justify-content:space-between; padding:16px 0; }
        .logo a { color:var(--primary-color); font-weight:700; font-size:22px; text-decoration:none; }

        .progress-bar { display:flex; justify-content:center; gap:18px; }
        .progress-step { text-align:center; font-size:13px; color:#666; }
        .step-circle { width:30px; height:30px; border-radius:50%; background:#ddd; display:inline-flex; align-items:center; justify-content:center; color:#fff; font-weight:700; margin-bottom:6px; }
        .step-circle.active { background:var(--primary-color); }

        .donation-payment { padding:36px 0 80px; min-height: calc(100vh - 220px); }
        .payment-container { display:grid; grid-template-columns: 1fr 360px; gap:28px; align-items:start; }

        .payment-methods, .donation-summary { background:var(--white); border-radius:10px; padding:22px; box-shadow:0 8px 24px rgba(0,0,0,0.04); }

        .payment-header h2 { color:var(--secondary-color); font-size:20px; margin-bottom:4px; }
        .payment-tabs { display:flex; gap:8px; border-bottom:1px solid var(--border-color); margin-bottom:18px; }
        .payment-tab { padding:10px 16px; cursor:pointer; color:#666; font-weight:600; border-bottom:3px solid transparent; }
        .payment-tab.active { color:var(--primary-color); border-bottom-color:var(--primary-color); }

        .payment-form { display:none; }
        .payment-form.active { display:block; }

        .form-group { margin-bottom:16px; }
        label { display:block; margin-bottom:8px; font-weight:600; color:#555; font-size:14px; }

        input, select {
            width:100%; padding:12px 14px; border:1px solid var(--border-color); border-radius:8px; font-size:15px;
        }
        input:focus, select:focus { outline:none; border-color:var(--primary-color); box-shadow:0 0 0 4px rgba(46,139,87,0.08); }

        .card-input-container { position:relative; }
        .card-icons { position:absolute; right:12px; top:50%; transform:translateY(-50%); display:flex; gap:8px; }
        .card-icon { width:44px; height:28px; border-radius:6px; background:#f3f3f3; display:flex; align-items:center; justify-content:center; color:#777; font-weight:700; font-size:12px; opacity:0.55; }
        .card-icon.active { opacity:1; background:#e9f5ee; color:var(--primary-color); border:1px solid var(--primary-color); }

        .card-details { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
        .security-info { font-size:12px; color:#666; margin-top:6px; }

        .payment-button { width:100%; padding:14px 16px; border-radius:10px; background:var(--primary-color); color:white; border:none; font-weight:700; font-size:16px; cursor:pointer; margin-top:8px; }
        .payment-button:hover { background:var(--secondary-color); }

        .bitcoin-qr { text-align:center; margin:12px 0; }
        .bitcoin-address { background:#fafafa; padding:10px 12px; border-radius:8px; font-family:monospace; word-break:break-all; text-align:center; margin-bottom:8px; font-size:13px; }

        .copy-btn { background:#f5f5f5; border:1px solid #eee; padding:8px 12px; border-radius:8px; cursor:pointer; }

        /* Summary */
        .summary-header { display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--border-color); padding-bottom:12px; margin-bottom:12px; }
        .summary-header h3 { color:var(--secondary-color); font-size:18px; }
        .summary-toggle { background:none; border:none; cursor:pointer; color:#666; font-size:18px; }
        .summary-details { margin-bottom:12px; }
        .summary-item { display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px solid #f3f3f3; color:#444; }
        .summary-total { display:flex; justify-content:space-between; font-weight:800; font-size:18px; padding-top:12px; }
        .donor-info { margin-top:12px; font-size:14px; color:#444; }

        .thumbnail-images { display:flex; gap:8px; margin-bottom:12px; }
        .thumbnail-images img { width:100%; border-radius:8px; object-fit:cover; max-height:120px; }

        @media (max-width: 880px) {
            .payment-container { grid-template-columns: 1fr; }
            .donation-summary { position:static; margin-top:18px; }
            .card-details { grid-template-columns:1fr; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="nav-content">
                <div class="logo"><a href="#">Cloudator</a></div>
                <div class="progress-bar" aria-hidden="true">
                    <div class="progress-step"><div class="step-circle">1</div><div class="step-label">Donation</div></div>
                    <div class="progress-step"><div class="step-circle active">2</div><div class="step-label">Payment</div></div>
                    <div class="progress-step"><div class="step-circle">3</div><div class="step-label">Confirmation</div></div>
                </div>
            </div>
        </div>
    </header>

    <section class="donation-payment">
        <div class="container">
            <div class="payment-container">
                <!-- Payment column -->
                <div class="payment-methods" role="region" aria-label="Payment methods">
                    <div class="payment-header">
                        <h2>Payment Method</h2>
                        <div style="font-size:13px;color:#666;margin-top:6px;">Choose how you'd like to complete your donation</div>
                    </div>

                    <div class="payment-tabs" role="tablist">
                        <div class="payment-tab active" data-tab="card" role="tab" aria-selected="true">Debit or Credit Card</div>
                        <div class="payment-tab" data-tab="bitcoin" role="tab" aria-selected="false">Bitcoin</div>
                        <div class="payment-tab" data-tab="bank" role="tab" aria-selected="false">Bank Transfer</div>
                    </div>

                    <!-- Card Form -->
                    <div class="payment-form active" id="card-form" role="tabpanel">
                        <div class="form-group">
                            <label for="card-number">Card Number</label>
                            <div class="card-input-container">
                                <input id="card-number" type="text" inputmode="numeric" placeholder="1234 5678 9012 3456" maxlength="23" autocomplete="cc-number" aria-label="Card number" />
                                <div class="card-icons" aria-hidden="true">
                                    <div class="card-icon" id="visa-icon">VISA</div>
                                    <div class="card-icon" id="mastercard-icon">MC</div>
                                    <div class="card-icon" id="amex-icon">AMEX</div>
                                </div>
                            </div>
                        </div>

                        <div class="card-details">
                            <div class="form-group">
                                <label for="expiry-date">Expiration Date</label>
                                <input id="expiry-date" type="text" inputmode="numeric" placeholder="MM/YY" maxlength="5" autocomplete="cc-exp" />
                            </div>

                            <div class="form-group">
                                <label for="cvc">Security Code (CVC)</label>
                                <input id="cvc" type="text" inputmode="numeric" placeholder="123" maxlength="4" autocomplete="cc-csc" />
                                <div class="security-info">3 digits for Visa/Mastercard, 4 for Amex</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="card-name">Name on Card</label>
                            <input id="card-name" type="text" placeholder="John Doe" autocomplete="cc-name" />
                        </div>

                        <button id="pay-card" class="payment-button">Pay</button>
                    </div>

                    <!-- Bitcoin Form -->
                    <div class="payment-form" id="bitcoin-form" role="tabpanel" aria-hidden="true">
                        <p style="color:#444;">Send Bitcoin to the address below. Donations are processed once network confirmations are received.</p>

                        <div class="bitcoin-qr" aria-hidden="true">
                            <div style="width:200px;height:200px;background:#f1f1f1;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#999;margin:12px auto;">
                                QR Code Image
                            </div>
                        </div>

                        <div class="bitcoin-address" id="bitcoin-address">bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh</div>
                        <div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;">
                            <button id="copy-address" class="copy-btn">Copy Address</button>
                            <div id="copy-status" style="color:#4b9b4b;font-weight:700;display:none;">Copied!</div>
                        </div>

                        <div class="form-group">
                            <label for="bitcoin-email">Email (for receipt)</label>
                            <input id="bitcoin-email" type="email" placeholder="your@email.com" />
                        </div>

                        <button id="pay-bitcoin" class="payment-button">I've Sent Bitcoin</button>
                    </div>

                    <!-- Bank Form -->
                    <div class="payment-form" id="bank-form" role="tabpanel" aria-hidden="true">
                        <p style="color:#444;">Make a bank transfer using the details below. Include your donation reference so we can match your payment.</p>

                        <div class="form-group">
                            <label>Bank Name</label>
                            <div style="padding:12px;background:#fafafa;border-radius:8px;">Global Charity Bank</div>
                        </div>

                        <div class="form-group">
                            <label>Account Name</label>
                            <div style="padding:12px;background:#fafafa;border-radius:8px;">Cloudator Foundation</div>
                        </div>

                        <div class="form-group">
                            <label>Account Number</label>
                            <div style="padding:12px;background:#fafafa;border-radius:8px;font-family:monospace;">1234 5678 9012 3456</div>
                        </div>

                        <div class="form-group">
                            <label>Routing Number (ABA)</label>
                            <div style="padding:12px;background:#fafafa;border-radius:8px;">021000021</div>
                        </div>

                        <div class="form-group">
                            <label>SWIFT/BIC Code</label>
                            <div style="padding:12px;background:#fafafa;border-radius:8px;">GCBKUS33</div>
                        </div>

                        <div class="form-group">
                            <label for="bank-reference">Donation Reference</label>
                            <input id="bank-reference" type="text" placeholder="Your name, email or reference (e.g. John Doe - SL1001)" />
                        </div>

                        <button id="pay-bank" class="payment-button">I've Made Transfer</button>
                    </div>

                    <div style="margin-top:14px;">
                        <div class="security-notice" style="display:flex;align-items:center;gap:10px;justify-content:center;">
                            <i class="fas fa-lock" style="color:var(--primary-color)"></i>
                            <div style="font-size:13px;color:#666;">Transactions are secure and encrypted. You will not be charged until finalize & submit.</div>
                        </div>
                    </div>
                </div>

                <!-- Summary column -->
                <aside class="donation-summary" aria-label="Donation summary">
                    <div class="summary-header">
                        <h3>Donation Summary</h3>
                        <button class="summary-toggle" id="summary-toggle">▲</button>
                    </div>

                    <div class="thumbnail-images" aria-hidden="true">
                        <!-- using the uploaded template images -->
                        <img src="/mnt/data/727AB543-CE75-49E1-93D9-36984B2B65CD.jpeg" alt="donation screenshot 1" />
                        <img src="/mnt/data/D9CA712D-E469-4A13-8879-71AFDCFCF48D.jpeg" alt="donation screenshot 2" />
                    </div>

                    <div class="summary-details" id="summary-details">
                        <div class="summary-item"><span>Donation Amount</span><span id="summary-amount">$100.00</span></div>
                        <div class="summary-item"><span>Frequency</span><span id="summary-frequency">One-Time</span></div>
                        <div class="summary-item"><span>Processing Fee</span><span id="summary-fee">$0.00</span></div>
                        <div class="summary-total"><span>Total</span><span id="summary-total">$100.00</span></div>
                    </div>

                    <div class="donor-info" id="donor-info">
                        <p><strong>Donor Information</strong></p>
                        <p id="donor-name">John Doe</p>
                        <p id="donor-email">john.doe@example.com</p>
                        <p id="donor-cause">Cause: Education for Children</p>
                    </div>

                    <div style="margin-top:12px;">
                        <div class="security-notice"><i class="fas fa-info-circle"></i> You will not be charged until you finalize & submit.</div>
                    </div>
                </aside>
            </div>
        </div>
    </section>

    <footer style="background:var(--white);padding:18px 0;margin-top:28px;">
        <div class="container" style="text-align:center;color:#777;">&copy; 2023 Cloudator. All rights reserved.</div>
    </footer>

    <script>
        (function () {
            /* --- Tabs --- */
            const tabs = document.querySelectorAll('.payment-tab');
            const forms = document.querySelectorAll('.payment-form');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => { t.classList.remove('active'); t.setAttribute('aria-selected','false'); });
                    forms.forEach(f => { f.classList.remove('active'); f.setAttribute('aria-hidden','true'); });

                    tab.classList.add('active');
                    tab.setAttribute('aria-selected','true');
                    const target = tab.dataset.tab;
                    const form = document.getElementById(target + '-form');
                    if (form) {
                        form.classList.add('active');
                        form.setAttribute('aria-hidden','false');
                    } else {
                        // fallback: forms mapped by id card-form/bitcoin-form/bank-form
                        const mapped = document.getElementById(target + '-form') || document.getElementById(target + '-form');
                    }
                });
            });

            /* --- Card formatting & type detection --- */
            const cardNumberInput = document.getElementById('card-number');
            const visaIcon = document.getElementById('visa-icon');
            const mcIcon = document.getElementById('mastercard-icon');
            const amexIcon = document.getElementById('amex-icon');
            const cvcInput = document.getElementById('cvc');

            function resetCardIcons() {
                [visaIcon, mcIcon, amexIcon].forEach(i => i.classList.remove('active'));
            }

            function detectCardType(num) {
                if (!num) return '';
                if (/^4/.test(num)) return 'visa';
                if (/^5[1-5]/.test(num)) return 'mastercard';
                if (/^3[47]/.test(num)) return 'amex';
                return '';
            }

            // format number (grouping). Amex groups: 4-6-5 (15 digits). Others: groups of 4.
            cardNumberInput.addEventListener('input', (e) => {
                const raw = e.target.value.replace(/\D/g, '');
                let cardType = detectCardType(raw);
                let formatted = '';

                if (cardType === 'amex') {
                    // 4 - 6 - 5
                    const part1 = raw.slice(0,4);
                    const part2 = raw.slice(4,10);
                    const part3 = raw.slice(10,15);
                    formatted = [part1, part2, part3].filter(Boolean).join(' ');
                    cvcInput.maxLength = 4;
                } else {
                    // groups of 4
                    const groups = raw.match(/.{1,4}/g) || [];
                    formatted = groups.join(' ');
                    cvcInput.maxLength = 3;
                }

                e.target.value = formatted;

                // update icons
                resetCardIcons();
                if (cardType === 'visa') visaIcon.classList.add('active');
                else if (cardType === 'mastercard') mcIcon.classList.add('active');
                else if (cardType === 'amex') amexIcon.classList.add('active');
            });

            /* --- Expiry formatting --- */
            const expiry = document.getElementById('expiry-date');
            expiry.addEventListener('input', (e) => {
                let v = e.target.value.replace(/\D/g, '');
                if (v.length > 4) v = v.slice(0,4);
                if (v.length >= 3) {
                    e.target.value = v.slice(0,2) + '/' + v.slice(2);
                } else if (v.length >= 1) {
                    e.target.value = v;
                } else e.target.value = '';
            });

            /* --- Copy Bitcoin address --- */
            const copyBtn = document.getElementById('copy-address');
            const copyStatus = document.getElementById('copy-status');
            copyBtn && copyBtn.addEventListener('click', async function () {
                const address = document.getElementById('bitcoin-address').textContent.trim();
                try {
                    await navigator.clipboard.writeText(address);
                    copyStatus.style.display = 'inline-block';
                    setTimeout(()=> copyStatus.style.display = 'none', 1800);
                } catch (err) {
                    alert('Could not copy address: ' + err);
                }
            });

            /* --- Payment button handlers (demo) --- */
            document.getElementById('pay-card').addEventListener('click', function () {
                // Basic validation demo
                const card = cardNumberInput.value.replace(/\s/g,'');
                const exp = expiry.value;
                const cvc = cvcInput.value;
                const name = document.getElementById('card-name').value.trim();
                if (card.length < 13) { alert('Enter a valid card number'); return; }
                if (!/^\d{2}\/\d{2}$/.test(exp)) { alert('Enter expiration as MM/YY'); return; }
                if (cvc.length < 3) { alert('Enter CVC'); return; }
                alert('Card payment would be processed here (demo). Thank you, ' + (name || 'donor') + '!');
            });

            document.getElementById('pay-bitcoin').addEventListener('click', function () {
                const email = document.getElementById('bitcoin-email').value.trim();
                alert('Bitcoin payment confirmation would be handled here (demo). Receipt will be sent to: ' + (email || 'your email'));
            });

            document.getElementById('pay-bank').addEventListener('click', function () {
                const ref = document.getElementById('bank-reference').value.trim();
                alert('Thank you — bank transfer instructions are above. Reference: ' + (ref || '[none provided]') + ' (demo).');
            });

            /* --- Summary toggle --- */
            const summaryToggle = document.getElementById('summary-toggle');
            const summaryDetails = document.getElementById('summary-details');
            const donorInfo = document.getElementById('donor-info');
            let summaryVisible = true;
            summaryToggle.addEventListener('click', function () {
                summaryVisible = !summaryVisible;
                summaryDetails.style.display = summaryVisible ? 'block' : 'none';
                donorInfo.style.display = summaryVisible ? 'block' : 'none';
                summaryToggle.textContent = summaryVisible ? '▲' : '▼';
            });

            /* --- Populate summary from URL params (amount, name, email, cause) --- */
            function getQuery() {
                const q = {};
                const pairs = location.search.replace(/^\?/,'').split('&').filter(Boolean);
                for (const p of pairs) {
                    const [k,v] = p.split('=');
                    if (!k) continue;
                    q[decodeURIComponent(k)] = decodeURIComponent((v||'').replace(/\+/g,' '));
                }
                return q;
            }
            const params = getQuery();
            const amount = params.amount || params.donation || '100.00';
            const name = params.name || 'John Doe';
            const email = params.email || 'john.doe@example.com';
            const cause = params.cause || 'Education for Children';
            // Update DOM
            document.getElementById('summary-amount').textContent = '$' + Number(amount).toFixed(2);
            document.getElementById('summary-total').textContent = '$' + Number(amount).toFixed(2);
            document.getElementById('donor-name').textContent = name;
            document.getElementById('donor-email').textContent = email;
            document.getElementById('donor-cause').textContent = 'Cause: ' + cause;

            // Update pay buttons text to show amount
            const payButtons = document.querySelectorAll('.payment-button');
            payButtons.forEach(btn => {
                if (btn.id === 'pay-bank') btn.textContent = "I've Made Transfer";
                else btn.textContent = btn.textContent.replace(/\d+(\.\d+)?/,'').trim();
            });
            // Show amount on card button specifically
            const payCardBtn = document.getElementById('pay-card');
            payCardBtn.textContent = 'Pay ' + ('$' + Number(amount).toFixed(2));

        })();
    </script>
</body>
</html>